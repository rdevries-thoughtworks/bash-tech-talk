<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Bash

```bash
if true; then echo hello world; fi # syntax highlighting works \o/
```

* Made with [Remark](https://remarkjs.com/)

???

Notes go here

---

class: center, middle

# Goal of this talk

1. Let's automate everything
2. Bad Bash code? Do better!

???
-Christoph

---

class: center, middle

# Why care about bash

---

class: center, middle

# What's bash anyway?

---

class: center, middle

# Why is bash not a decent PL?

---

class:

# Good basic practises

```bash
#!/usr/bin/env bash
set -euo pipefail

readonly SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

main() {
  local environment="$1"

  ...
}

main "$@"
```

Let's unwrap...

???
-Christoph
---

# Good basic paractises (cont.)

Put bash into "safe mode".

```bash
set -e

cd /tmp
rm -rf *


set -u

rm -rf "${DIR}/"


set -o pipefail

cat for_deletion | xargs rm
```

Some more reading: https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/

---

# Good basic paractises (cont.)

Limit options to reduce failures: e.g. scope variables

```bash
readonly SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

main() {
  local environment="$1"

  ...
}
```

---

# Good basic paractises (cont.)

Follow a predictable style, reduce surprises

```bash
main() {

  ...
}

main "$@"
```

Find more in the "Shell Style Guide" from Google: https://google.github.io/styleguide/shell.xml

---

# Good basic paractises (cont.)

Always quote, deal with values including spaces
```bash
main "$@"
```

Use shellcheck (https://github.com/koalaman/shellcheck) to tell you about onforseen issues.

---

class: center, middle

# Typical things, and how you want to do them in bash

---

class: center, middle

# Also interesting

* osh
* bats

---

class: center, middle

# Caveats / WAT

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
